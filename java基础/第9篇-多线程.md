## 多线程

在实际开发中，电脑可能同时在使用好几个软件，一边打游戏一边听听歌。这个时候就是多进程或者多线程。

**并发和并行**

+ 并发：指两个或多个事件在**同一个时间段**内发生。
+ 并行：指两个或多个事件在**同一时刻**发生（同时发生）。

![image-20200926194455274](https://i.loli.net/2020/10/14/ekZBWs4fw8CEpI3.png)

在单cpu电脑上，宏观上同时运行多个程序，微观上，这些程序是分时交替运行

在多核cpu电脑上，并发的程序可以分配到多个处理上，实现并行。

单核处理器的计算机肯定是不能并行的处理多个任务的，只能是多个任务在单个CPU上并发运行。同理,线程也是一样的，从宏观角度上理解线程是并行运行的，但是从微观角度上分析却是串行运行的，即一个线程一个线程的去运行，当系统只有一个CPU时，线程会以某种顺序执行多个线程，我们把这种情况称之为线程调度。

**线程和进程：**

**进程：**是指一个内存中运行的**应用程序**，每个进程都有一个独立的内存空间，一个应用程序可以**同时运行多个进程**；**进程也是程序的一次执行过程**，是**系统运行程序的基本单位**；系统运行一个程序即是一个进程从创建、运行到消亡的过程。
**线程：****线程是进程中的一个执行单元**，负责当前进程中程序的执行，一个进程中至少有一个线程。一个进程中是可以有多个线程的，这个应用程序也可以称之为多线程程序。
简而言之：一个程序运行后至少有一个进程，一个进程中可以包含多个线程

**线程调度：**

+ **分时调度**
  所有线程轮流使用 CPU 的使用权，平均分配每个线程占用 CPU 的时间。
+ **抢占式调度**
  优先让优先级高的线程使用 CPU，如果线程的优先级相同，那么会随机选择一个(线程随机性)，Java使用的为抢占式调度。


CPU(中央处理器)使用抢占式调度模式在多个线程间进行着高速的切换。对于CPU的一个核而言，某个时刻，只能执行一个线程，而 CPU的在多个线程间切换速度相对我们的感觉要快，看上去就是在同一时刻运行。 其实，多线程程序并不能提高程序的运行速度，但能够提高程序运行效率，让CPU的使用率更高。



**创建线程类：**

 java.lang.Thread 类代表线程，所有的线程对象都必须是Thread类或其子类的实例。

每个线程的作用是完成一定的任务，实际上就是执行一段程序流即一段顺序执行的代码。

Java中通过继承Thread类来创建并启动多线程的步骤如下：

1. 定义Thread类的子类，并重写该类的run()方法，该run()方法的方法体就代表了线程需要完成的任务,因此把run()方法称为线程执行体。
2. 创建Thread子类的实例，即创建了线程对象
3. 调用线程对象的start()方法来启动该线程

**例子：**

```javajava
测试类：
public class Demo01 {
public static void main(String[] args) {    
//创建自定义线程对象        
MyThread mt = new MyThread("新的线程！");        
//开启新线程        
mt.start();        
//在主方法中执行for循环        
for (int i = 0; i < 10; i++) {        
System.out.println("main线程！"+i);            
}        
}    
}
```

**子当以线程类：**

```
public class MyThread extends Thread {
//定义指定线程名称的构造方法    
public MyThread(String name) {    
//调用父类的String参数的构造方法，指定线程的名称        
super(name);        
} 
/**    
 * 重写run方法，完成该线程执行的逻辑    
 */    
@Override    
public void run() {    
for (int i = 0; i < 10; i++) {        
System.out.println(getName()+"：正在执行！"+i);            
 }        
 }    
}
```

